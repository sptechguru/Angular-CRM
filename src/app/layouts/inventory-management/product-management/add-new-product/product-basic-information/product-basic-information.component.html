<ngx-spinner bdColor="rgba(51,51,51,0.8)" color="#fff"
    template="<img src='https://i.gifer.com/origin/b4/b4d657e7ef262b88eb5f7ac021edda87.gif' style='width:100px;'/>">
</ngx-spinner>
<div class="py-2">

    <form class="p-3 form-shadow" [formGroup]="basicInfoForm">
        <div class="row">
            <div class="col-12">
                <h2>Basic Information</h2>
            </div>
            <div class="col-md-6">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Product Name</mat-label>
                    <input matInput formControlName="product_name" type="text" />
                    <mat-error
                        *ngIf="this.basicInfoForm.controls.product_name.touched && this.basicInfoForm.controls.product_name.errors?.required"
                        required>Product Name is required</mat-error>
                </mat-form-field>
            </div>
            <div class="col-md-6">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Product Description</mat-label>
                    <input matInput formControlName="product_description" type="text" />
                    <mat-error
                        *ngIf="this.basicInfoForm.controls.product_description.touched && this.basicInfoForm.controls.product_description.errors?.required"
                        required>Product Description is required</mat-error>
                </mat-form-field>
            </div>
            <div class="col-md-6">
                <mat-form-field appearance="outline" class="example-full-width">
                    <mat-label>Product Category</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass"
                        formControlName="master_product_category_id">
                        <mat-option [value]="category.id" *ngFor="let category of categoryList">
                            {{category.product_category}}</mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="this.basicInfoForm.controls.master_product_category_id.touched && this.basicInfoForm.controls.master_product_category_id.errors?.required"
                        required>Product Description is required</mat-error>
                </mat-form-field>
            </div>
            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Business Client</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass"
                        formControlName="master_business_client_id">
                        <mat-option [value]="client.id" *ngFor="let client of clientList">{{client.business_client}}
                        </mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="this.basicInfoForm.controls.master_business_client_id.touched && this.basicInfoForm.controls.master_business_client_id.errors?.required"
                        required>Please select Business Client. </mat-error>
                </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Business Partner</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass"
                        formControlName="master_business_partner_id">
                        <mat-option [value]="partner.id" *ngFor="let partner of partnerList">
                            {{partner.business_partner}}</mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="this.basicInfoForm.controls.master_business_partner_id.touched && this.basicInfoForm.controls.master_business_partner_id.errors?.required"
                        required>Please select Business Partner. </mat-error>
                </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Business Type</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass"
                        formControlName="master_business_type_id">
                        <mat-option [value]="businesstype.id" *ngFor="let businesstype of businessTypeList">
                            {{businesstype.business_type}}</mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="this.basicInfoForm.controls.master_business_type_id.touched && this.basicInfoForm.controls.master_business_type_id.errors?.required"
                        required>Please select Business Type. </mat-error>
                </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Branding Possibilities</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass"
                        formControlName="branding_possibilities">
                        <mat-option value="yes">yes</mat-option>
                        <mat-option value="no">no</mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="this.basicInfoForm.controls.branding_possibilities.touched && this.basicInfoForm.controls.branding_possibilities.errors?.required"
                        required>Please select branding possibilities</mat-error>
                </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Product service type</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass"
                        formControlName="product_service_type">
                        <mat-option value="express">Express</mat-option>
                        <mat-option value="non_express">Non express</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Header Tags</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass" multiple
                        formControlName="header_tags">
                        <mat-option *ngFor="let i of headerlist" value="{{i.id}}">{{i.name}}</mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="this.basicInfoForm.controls.product_service_type.touched && this.basicInfoForm.controls.product_service_type.errors?.required"
                        required>Header Tag Required</mat-error>
                </mat-form-field>
            </div>
            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Trade Assurance</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass" multiple
                        formControlName="trade_assurance">
                        <mat-option *ngFor="let i of trade_assurance" value="{{i.id}}">{{i.name}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>

            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Status</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass" formControlName="status">
                        <mat-option [value]="status.id" *ngFor="let status of statusList">{{status.title}}</mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="this.basicInfoForm.controls.status.touched && this.basicInfoForm.controls.status.errors?.required"
                        required>Please select Status. </mat-error>
                </mat-form-field>
            </div>
            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Visibility</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass"
                        formControlName="user_group_visibility">
                        <mat-option *ngFor="let i of visibility" [value]="i.value">
                            {{i.name}}
                        </mat-option>

                    </mat-select>
                </mat-form-field>
            </div>
            <!--<div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>URL</mat-label>
                    <input matInput formControlName="product_url" type="text" />
                </mat-form-field>
            </div>
        -->
            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>MRP Printed on Box</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass"
                        formControlName="mrp_printed_on_box">
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                    </mat-select>

                </mat-form-field>
            </div>
            <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Tax Applicable</mat-label>
                    <mat-select [disableOptionCentering]="true" panelClass="myPanelClass"
                        formControlName="tax_applicable">
                        <mat-option value="yes">Yes</mat-option>
                        <mat-option value="no">No</mat-option>
                    </mat-select>
                </mat-form-field>
            </div>


            <div class="col-md-12 mb-3" *ngIf="this.editProductId">
                <h2>Product Attribute</h2>
                <div class="form-shadow pt-3">
                    <div class="row mx-0" *ngIf="this.productAttributeList?.length > 0">
                        <div class="col-12">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th class="font-weight-bold">Attribute Type</th>
                                        <th class="font-weight-bold">Attribute Value</th>
                                        <th class="font-weight-bold">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="border-bottom:1px solid rgba(128, 128, 128,0.2);"
                                        *ngFor="let attribute of this.productAttributeList;let attributeIndex=index;">
                                        <td>{{attribute?.master_product_attribute?.product_attribute ?
                                            attribute?.master_product_attribute?.product_attribute :
                                            attribute.product_attribute }}</td>
                                        <td>{{attribute.attribute_value ? attribute.attribute_value :
                                            attribute.attribute_values[0].attribute_value}}</td>
                                        <td><i class="material-icons text-danger cp"
                                                (click)="deleteAttribute(attributeIndex,attribute?.id ? attribute?.id : attribute.attribute_values[0].id)">delete</i>
                                        </td>
                                    </tr>

                                </tbody>

                            </table>
                        </div>
                        <!--- <ng-container *ngFor="let attribute of this.productAttributeList;let attributeIndex=index;">
                        <div class="col-4">
                            <h3>{{attribute?.master_product_attribute?.product_attribute ? attribute?.master_product_attribute?.product_attribute : attribute.product_attribute }}</h3>
                        </div>
                        <div class="col-4">
                           <h3>{{attribute.attribute_value ? attribute.attribute_value : attribute.attribute_values[0].attribute_value}}</h3>
                        </div>
                        <div class="col-4">
                           <i class="material-icons text-danger cp"
                           (click)="deleteAttribute(attributeIndex,attribute?.master_product_attribute?.id ? attribute?.master_product_attribute?.id : attribute.id )">delete</i>
                           
                        </div>
                    
                    </ng-container>
                -->

                    </div>

                    <div class="row mx-0">
                        <div class="col-4">
                            <mat-form-field class="example-full-width" appearance="outline">
                                <mat-label>Attribute Type</mat-label>
                                <mat-select [disableOptionCentering]="true" panelClass="myPanelClass"
                                    [formControl]="attributeType">
                                    <mat-option value="">Select Attribute</mat-option>
                                    <mat-option [value]="attributeOption.id"
                                        *ngFor="let attributeOption of attributeOptionList; index as i;">
                                        {{attributeOption.product_attribute}}</mat-option>

                                </mat-select>
                            </mat-form-field>
                        </div>
                        <div class="col-4">
                            <mat-form-field class="example-full-width" appearance="outline">
                                <mat-label>Attribute Value</mat-label>
                                <input type="text" [formControl]="attributeValue" matInput
                                    placeholder="Attribute Value" />
                            </mat-form-field>

                        </div>

                        <div class="row mx-0">
                            <div class="col-4">
                                <mat-form-field class="example-full-width" appearance="outline">
                                    <mat-label>Attribute Type</mat-label>
                                    <mat-select [formControl]="attributeType">
                                        <mat-option value="">Select Attribute</mat-option>
                                        <mat-option [value]="attributeOption.id"
                                            *ngFor="let attributeOption of attributeOptionList; index as i;">
                                            {{attributeOption.product_attribute}}</mat-option>

                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-4">
                                <mat-form-field class="example-full-width" appearance="outline">
                                    <mat-label>Attribute Value</mat-label>
                                    <input type="text" [formControl]="attributeValue" matInput
                                        placeholder="Attribute Value" />

                                </mat-form-field>
                            </div>
                            <div class="col-4 mt-2">
                                <button mat-flat-button color="warn" [disabled]="isUserProcessing"
                                    (click)="addAttribute()">Add Attribute</button>
                            </div>
                        </div>
                    </div>

                </div>
                <!--- <div class="col-md-6">
                <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>HSN Code</mat-label>
                    <input matInput  type="text" formControlName="product_hsn"/>
                </mat-form-field>
            </div>
        -->
            </div>
        </div>

        <div class="col-12">
            <div class="d-flex justify-content-between">
                <button class="invisible"></button>
                <button mat-flat-button color="warn" (click)="checkForNext()">{{editProductId ? 'Update' :'Save'
                    }}</button>
                <button mat-flat-button color="warn" (click)="stepper.next()">Next</button>
            </div>
        </div>
    </form>
</div>